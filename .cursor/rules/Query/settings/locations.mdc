---
description: Locations Configuration Query API for warehouse/store locations and shipping rules management
globs: 
alwaysApply: false
---

# Locations Configuration Query API

## Overview

The locations system manages physical warehouse, store, and office locations along with their shipping rules. This includes:
1. **Locations** - Physical locations (warehouses, stores, offices)
2. **Location Shipping Rules** - Define which zones/countries each location can ship to

## Endpoints

### Locations

**GET** `/server/configuration/locations/query`
**GET** `/server/configuration/locations/retrieve`
**GET** `/server/configuration/locations/retrieve/:id`
**PUT** `/server/configuration/locations/set-default/:id`

### Location Shipping Rules

**GET** `/server/configuration/location-rules/query`
**GET** `/server/configuration/location-rules/retrieve`
**GET** `/server/configuration/location-rules/retrieve/:id`

## Locations

### Query All Locations
```bash
# Get all locations with pagination
curl "http://localhost:3100/server/configuration/locations/query?page=1&limit=50"
```

### Query Parameters
- `page` (integer, optional) - Page number (default: 1)
- `limit` (integer, optional) - Results per page (default: 50)
- `type` (string, optional) - Filter by location type (WAREHOUSE, STORE, OFFICE)
- `country` (string, optional) - Filter by country code
- `is_active` (boolean, optional) - Filter by active status
- `can_fulfill_orders` (boolean, optional) - Filter by fulfillment capability
- `is_default` (boolean, optional) - Filter by default status
- `search` (string, optional) - Search in name, address, and city
- `orderBy` (string, optional) - Field to order by (default: name)
- `ascending` (boolean, optional) - Sort order (default: true)

### Retrieve All Locations
```bash
curl "http://localhost:3100/server/configuration/locations/retrieve"
```

### Retrieve by Type
```bash
curl "http://localhost:3100/server/configuration/locations/retrieve?type=WAREHOUSE"
```

### Retrieve Single Location
```bash
curl "http://localhost:3100/server/configuration/locations/retrieve/{location-id}"
```

### Response Format
```json
{
  "success": true,
  "data": [
    {
      "id": "location-uuid",
      "name": "Prague Main Warehouse",
      "address": "Václavské náměstí 1",
      "city": "Prague",
      "country": "CZ",
      "type": "WAREHOUSE",
      "is_default": true,
      "is_active": true,
      "can_fulfill_orders": true,
      "store": null,
      "created_at": "2024-01-15T10:00:00Z"
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 50,
    "total": 3,
    "total_pages": 1
  }
}
```

### Common Location Query Use Cases

#### 1. Get All Active Warehouses
```bash
curl "http://localhost:3100/server/configuration/locations/query?type=WAREHOUSE&is_active=true"
```

#### 2. Find Fulfillment Locations
```bash
curl "http://localhost:3100/server/configuration/locations/query?can_fulfill_orders=true"
```

#### 3. Get Default Location
```bash
curl "http://localhost:3100/server/configuration/locations/retrieve?is_default=true"
```

#### 4. Search Locations by Name
```bash
curl "http://localhost:3100/server/configuration/locations/query?search=Prague"
```

#### 5. Get Locations in Specific Country
```bash
curl "http://localhost:3100/server/configuration/locations/query?country=CZ"
```

## Location Shipping Rules

### Query Shipping Rules
```bash
# Get all rules with pagination
curl "http://localhost:3100/server/configuration/location-rules/query?page=1&limit=50"
```

### Query Parameters
- `page` (integer, optional) - Page number (default: 1)
- `limit` (integer, optional) - Results per page (default: 50)
- `location` (string, optional) - Filter by location ID
- `is_active` (boolean, optional) - Filter by active status
- `country` (string, optional) - Filter rules that include specific country
- `search` (string, optional) - Search in rule name and description

### Retrieve Rules for Location
```bash
curl "http://localhost:3100/server/configuration/location-rules/retrieve?location={location-id}"
```

### Retrieve Single Rule
```bash
curl "http://localhost:3100/server/configuration/location-rules/retrieve/{rule-id}"
```

### Response Format
```json
{
  "success": true,
  "data": [
    {
      "id": "rule-uuid",
      "location": "location-uuid",
      "name": "Prague Warehouse - EU Central",
      "description": "Ships to Central European countries",
      "shipping_zones": ["zone-uuid-1", "zone-uuid-2"],
      "countries": ["CZ", "SK", "PL", "HU"],
      "priority": 1,
      "is_active": true,
      "max_daily_capacity": 100,
      "cutoff_time": "14:00:00",
      "metadata": {},
      "created_at": "2024-01-15T10:00:00Z",
      "updated_at": "2024-01-15T10:00:00Z",
      "location": {
        "id": "location-uuid",
        "name": "Prague Main Warehouse",
        "type": "WAREHOUSE",
        "city": "Prague",
        "country": "CZ"
      }
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 50,
    "total": 5,
    "total_pages": 1
  }
}
```

### Common Shipping Rules Query Use Cases

#### 1. Get Active Rules
```bash
curl "http://localhost:3100/server/configuration/location-rules/query?is_active=true"
```

#### 2. Find Rules for Specific Country
```bash
curl "http://localhost:3100/server/configuration/location-rules/query?country=DE"
```

#### 3. Get Rules for Location
```bash
curl "http://localhost:3100/server/configuration/location-rules/query?location={location-id}"
```

#### 4. Search Rules
```bash
curl "http://localhost:3100/server/configuration/location-rules/query?search=EU"
```

## Location Types

- **WAREHOUSE**: Distribution center for order fulfillment
- **STORE**: Physical retail store
- **OFFICE**: Office location (non-fulfillment)

## Related Endpoints

### Locations
- **Create**: `POST /server/configuration/locations/create`
- **Query**: `GET /server/configuration/locations/query`
- **Retrieve**: `GET /server/configuration/locations/retrieve/:id`
- **Modify**: `PUT /server/configuration/locations/modify/:id`
- **Set Default**: `PUT /server/configuration/locations/set-default/:id`
- **Delete**: `DELETE /server/configuration/locations/delete/:id`

### Location Shipping Rules
- **Create**: `POST /server/configuration/location-rules/create`
- **Query**: `GET /server/configuration/location-rules/query`
- **Retrieve**: `GET /server/configuration/location-rules/retrieve/:id`
- **Modify**: `PUT /server/configuration/location-rules/modify/:id`
- **Delete**: `DELETE /server/configuration/location-rules/delete/:id`

