---
alwaysApply: true
---
# Module Table Standardization Rules

## About This Dashboard

**Nevios Admin Dashboard** is the administrative interface for the Nevios e-commerce platform. It's built with:

- **Frontend**: Next.js 14 (App Router) + React + Material-UI
- **Backend**: Express.js REST API (Nevios Express)
- **Database**: PostgreSQL via Supabase
- **Authentication**: JWT-based authentication with Express backend

### Purpose

This dashboard provides staff users (admins, managers, customer care) with tools to manage:

- **Orders** - View, create, modify, and fulfill customer orders
- **Customers** - Manage customer accounts, addresses, and order history
- **Products** - Create and manage product catalog, variants, inventory
- **Inventory** - Track stock levels across locations and variants
- **Payments** - View payment transactions and statuses
- **Fulfillments** - Manage order fulfillment and shipping
- **Documents** - Generate and view invoices, receipts, packing slips
- **Emails** - Track customer communications and transactional emails
- **Analytics** - Business insights and reporting (coming soon)
- **Settings** - Configure store settings, locations, shipping, integrations

### Architecture

**Data Flow:**
```
Frontend (Next.js) 
  ‚Üí JWT Auth Token 
    ‚Üí Express API (/api/server/*)
      ‚Üí PostgreSQL (via Supabase)
        ‚Üí Response Data
          ‚Üí Frontend Tables/Views
```

**Key Features:**
- üîê Role-based access control (admin, manager, customer_care, etc.)
- üìä Advanced filtering, sorting, and searching on all tables
- üîÑ Real-time data updates and pagination
- üì± Responsive design for mobile and desktop
- üé® **Nevios Design System** - Custom component library for consistency
- ‚ö° Optimized performance with React hooks and callbacks
- üîç Full-text search across all major entities

### Tech Stack Details

**Frontend:**
- Next.js 14 (App Router pattern)
- React 18 with hooks
- **Nevios Component Library** (primary UI components)
  - NeviosEnhancedTable, NeviosFilters, NeviosButtons
  - NeviosInput, NeviosFormPaper, NeviosBadge
  - Custom-built for consistency and scalability
- Material-UI (MUI) v5 (foundation/base components)
- Recharts for analytics
- Framer Motion for animations
- Day.js for date handling

**API Communication:**
- REST endpoints via Express backend
- JWT token authentication (Bearer token in Authorization header)
- Automatic token refresh
- Error handling and loading states

**State Management:**
- React Context for auth state
- Custom hooks for data fetching (`useModuleQuery`)
- Local state for UI interactions

**Design System:**
- **Nevios component library** (primary components - always use these first)
  - Tables: NeviosEnhancedTable
  - Forms: NeviosInput, NeviosFormPaper, NeviosFormContainer
  - Buttons: NeviosPrimaryButton, NeviosSecondaryButton, NeviosDangerButton
  - Filters: NeviosFilters with modular filter configs
  - Badges: NeviosBadge with semantic status colors
  - UI: NeviosGroupButton, NeviosCopyBlock, NeviosPaginationButtons
- Material-UI (MUI) for base components (Box, Typography, Stack, etc.)
- Consistent badge system for statuses
- Reusable form components
- Overlay system for settings and modals

This dashboard is designed to be maintainable, scalable, and follow consistent patterns across all modules.

---

## Standardization Rules

This section defines the standard patterns for creating module tables/lists in the admin dashboard.

---

## 1. Module Names

**Always use SINGULAR form** for module names in `useModuleQuery()`:

```javascript
// ‚úÖ CORRECT
useModuleQuery('customer', {...})
useModuleQuery('order', {...})
useModuleQuery('product', {...})
useModuleQuery('email', {...})
useModuleQuery('payment', {...})
useModuleQuery('fulfillment', {...})
useModuleQuery('document', {...})
useModuleQuery('discount', {...})
useModuleQuery('inventory', {...})

// ‚ùå WRONG - Don't use plural
useModuleQuery('customers', {...})
useModuleQuery('orders', {...})
useModuleQuery('emails', {...})
```

---

## 2. HTTP Methods

**Always use POST** for all query endpoints (default behavior):

```javascript
// ‚úÖ CORRECT - No method specified (defaults to POST)
useModuleQuery('order', {
  expand: ["customer"],
  initialFilters,
  initialSearch,
  enableSearch: true,
  transformData: transformOrderData
});

// ‚ùå WRONG - Don't specify GET
useModuleQuery('inventory', {
  method: 'GET', // ‚ùå Remove this
  ...
});
```

**Why POST?**
- No URL length limitations
- Better for complex filter objects
- Consistent across all endpoints
- Better for sensitive data

---

## 3. Transform Function Naming

**Pattern**: `transform{SingularModuleName}Data`

```javascript
// ‚úÖ CORRECT - Singular module name + Data
const transformOrderData = useCallback((orders) => {
  return orders.map(order => ({
    id: order.id,
    order_name: order.name,
    // ... other fields
    _original: order
  }));
}, []);

const transformCustomerData = useCallback((customers) => { ... });
const transformProductData = useCallback((products) => { ... });
const transformPaymentData = useCallback((payments) => { ... });

// ‚ùå WRONG
const transformOrdersData = useCallback(...);  // Plural
const transformBankData = useCallback(...);     // Too generic
const transform_order_data = useCallback(...);  // Wrong casing
```

**Requirements**:
- Must be wrapped in `useCallback()`
- Must validate array input
- Must include `_original: record` in output

---

## 4. Component Props Structure

**All table components must have these standard props**:

```javascript
export function ModuleTable({ 
  tableHeight,           // Required - height for the table
  initialFilters = {},   // Required - default to empty object
  initialSearch = ""     // Required - default to empty string
}) {
  // Implementation
}
```

**Optional props** (only add when needed):
```javascript
export function ModuleTable({ 
  tableHeight,
  initialFilters = {},
  initialSearch = "",
  onRowClick,      // Optional - custom row click handler
  customActions    // Optional - additional actions
}) {
  // Implementation
}
```

---

## 5. Data Field Naming

**Standard fields in transformed data**:

```javascript
const transformOrderData = useCallback((orders) => {
  return orders.map(order => ({
    // ‚úÖ Primary key - always 'id'
    id: order.id,
    
    // ‚úÖ Main display field - use {module}_name pattern
    order_name: order.name,
    
    // ‚úÖ Created date - always 'created_at'
    created_at: order.created_at,
    
    // ‚úÖ Related data - use {relation}_name pattern
    customer_name: order.customer?.full_name || 'Unknown',
    customer_id: order.customer?.id,
    
    // ‚úÖ Always include original data
    _original: order
  }));
}, []);
```

**Field Naming Rules**:
- Primary key: Always `id`
- Main field: `{module}_name` (e.g., `order_name`, `payment_name`, `document_name`)
- Dates: Always `created_at`, `updated_at` (not `order_date` or `payment_date`)
- Related data: `{relation}_name` and `{relation}_id`
- Original: Always `_original`

---

## 6. Column Definitions

**Standard column order and types**:

```javascript
const columnDefinitions = [
  // 1. First column - Main identifier/name
  clickableColumnFactory({
    field: "{module}_name",
    headerName: "{Module} ID",
    minWidth: 150,
    link: (params) => `/dashboard/{modules}/${params.id}`
  }),
  
  // 2. Date column - Created timestamp
  dateColumnFactory({
    field: "created_at",
    headerName: "Created",
    flex: 1.5,
    minWidth: 180,
    renderCell: (params) => (
      <Box sx={{ fontSize: "s", color: "gray.600" }}>
        {formatReadableDatetime(params.value)}
      </Box>
    ),
  }),
  
  // 3. Other columns as needed
  genericColumnFactory({...}),
  
  // 4. Status/Badge columns
  // 5. Actions column (if needed)
];
```

**Important**: Must import `clickableColumnFactory` from ColumnDefinitions

---

## 7. Expand Parameters

**Always expand relationships you display in the table**:

```javascript
// ‚úÖ CORRECT - Expand what you show
useModuleQuery('order', {
  expand: ["customer", "shipping_method", "items"],  // Shows these in table
  // ...
});

// ‚úÖ CORRECT - Nested expansion
useModuleQuery('inventory', {
  expand: ["variant", "location", "variant.product"],  // Nested: variant.product
  // ...
});

// ‚ùå WRONG - Showing customer name but not expanding
useModuleQuery('order', {
  expand: [],  // ‚ùå But we show customer_name in columns
  // ...
});
```

**Rule**: If you display data from a relationship, add it to `expand` array.

---

## 8. Search Configuration

**Always provide descriptive search placeholders**:

```javascript
<NeviosEnhancedTable
  enableSearch={true}
  searchTerm={searchTerm}
  onSearchChange={updateSearch}
  searchPlaceholder="Search {modules} by {field1}, {field2}, or {field3}..."
  {...otherProps}
/>
```

**Examples**:
```javascript
// ‚úÖ GOOD - Descriptive and specific
"Search orders by customer, order ID, or details..."
"Search customers by name, email, phone, or country..."
"Search products by title, description, vendor, type, tags, or handle..."
"Search payments by customer, payment ID, or external reference..."

// ‚ùå BAD - Too vague
"Search..."
"Search orders..."
```

---

## 9. Empty State Messages

**Use consistent pattern across all tables**:

```javascript
emptyStateProps={{
  title: 'No {modules} found',
  description: 'There are no {modules} to display',
}}
```

**Examples**:
```javascript
// ‚úÖ Orders
{ title: 'No orders found', description: 'There are no orders to display' }

// ‚úÖ Customers
{ title: 'No customers found', description: 'There are no customers to display' }

// ‚úÖ Products
{ title: 'No products found', description: 'There are no products to display' }
```

---

## 10. Error Handling & Validation

**Always validate array input in transform functions**:

```javascript
const transformOrderData = useCallback((orders) => {
  // ‚úÖ REQUIRED - Validate input is array
  if (!Array.isArray(orders)) {
    console.warn('Expected array but received:', typeof orders);
    return [];
  }
  
  return orders.map(order => ({
    // transformation logic
  }));
}, []);
```

**Additional validations**:
```javascript
// ‚úÖ Safe property access with fallbacks
customer_name: order.customer?.full_name || 'Unknown Customer'
email: customer.email || 'No Email'
status: order.status || 'pending'

// ‚úÖ Type checking when needed
amount: typeof order.amount === 'number' ? order.amount : 0
```

---

## 11. Checkbox Selection

**Use checkbox selection for future bulk actions**:

```javascript
<NeviosEnhancedTable
  columns={columnDefinitions}
  data={data}
  // ... other props
  checkboxSelection={true}  // ‚úÖ OK for now (bulk actions coming later)
  getRowId={(row) => row.id}
/>
```

**Note**: Bulk action implementation is planned for backend. Keep checkboxSelection for now, but:
- Don't add `bulkActions` array yet
- Don't add `onBulkAction` handler yet
- When backend is ready, we'll implement the actions

---

## 12. Complete Example

**Full table component following all standards**:

```javascript
"use client";
import { Box } from "@mui/material";
import React, { useCallback } from "react";
import {
  clickableColumnFactory,
  dateColumnFactory,
  genericColumnFactory,
} from "../../../components/ColumnDefinitions";
import { NeviosEnhancedTable } from "../../nevios/NeviosEnhancedTable";
import { formatReadableDatetime } from "../../../core/formatters";
import { useModuleQuery } from "../../../hooks/useModuleQuery";
import { MODULE_FILTER_CONFIG } from "../../nevios/NeviosFilters/ModuleFilterConfig";

export function ModuleTable({ 
  tableHeight,
  initialFilters = {},
  initialSearch = ""
}) {
  // ‚úÖ Transform function with proper naming
  const transformModuleData = useCallback((items) => {
    // ‚úÖ Validate array input
    if (!Array.isArray(items)) {
      return [];
    }
    
    return items.map(item => ({
      id: item.id,
      module_name: item.name,
      created_at: item.created_at,
      customer_name: item.customer?.full_name || 'Unknown',
      // ‚úÖ Keep original
      _original: item
    }));
  }, []);

  // ‚úÖ Use singular module name, POST method (default), expand relationships
  const {
    data,
    loading,
    error,
    totalCount,
    pagination,
    sortModel,
    filters,
    searchTerm,
    handlePaginationChange,
    handleSortChange,
    refreshData,
    updateFilters,
    updateSearch
  } = useModuleQuery('module', {
    expand: ["customer"],
    initialFilters,
    initialSearch,
    enableSearch: true,
    transformData: transformModuleData
  });

  // ‚úÖ Clickable first column, date column with formatReadableDatetime
  const columnDefinitions = [
    clickableColumnFactory({
      field: "module_name",
      headerName: "Module",
      minWidth: 150,
      link: (params) => `/dashboard/modules/${params.id}`
    }),
    dateColumnFactory({
      field: "created_at",
      headerName: "Created",
      flex: 1.5,
      minWidth: 180,
      renderCell: (params) => (
        <Box sx={{ fontSize: "s", color: "gray.600" }}>
          {formatReadableDatetime(params.value)}
        </Box>
      ),
    }),
    genericColumnFactory({
      field: "customer_name",
      headerName: "Customer",
      minWidth: 180,
      flex: 2,
    }),
  ];

  return (
    <Box sx={{ flex: 1, display: "flex", height: "100%", width: "100%", flexDirection: "column" }}>
      <NeviosEnhancedTable
        columns={columnDefinitions}
        data={data}
        loading={loading}
        error={error}
        totalCount={totalCount}
        pagination={pagination}
        onPaginationChange={handlePaginationChange}
        sortModel={sortModel}
        onSortChange={handleSortChange}
        tableHeight={tableHeight}
        hideFooter={false}
        enableSearch={true}
        searchTerm={searchTerm}
        onSearchChange={updateSearch}
        searchPlaceholder="Search modules by name, customer, or details..."
        enableFilters={true}
        filterConfigs={MODULE_FILTER_CONFIG}
        activeFilters={filters}
        onFiltersChange={updateFilters}
        checkboxSelection={true}
        getRowId={(row) => row.id}
        emptyStateProps={{
          title: 'No modules found',
          description: 'There are no modules to display',
        }}
      />
    </Box>
  );
}
```

---

## Quick Checklist

When creating or reviewing a table component:

- [ ] Module name is singular (e.g., `'customer'` not `'customers'`)
- [ ] No `method: 'GET'` specified (uses POST default)
- [ ] Transform function follows naming: `transform{Module}Data`
- [ ] Transform function validates array input
- [ ] Standard props: `tableHeight`, `initialFilters`, `initialSearch`
- [ ] Data includes: `id`, `{module}_name`, `created_at`, `_original`
- [ ] First column uses `clickableColumnFactory` with detail link
- [ ] Date columns use `formatReadableDatetime()`
- [ ] Expands all displayed relationships
- [ ] Descriptive search placeholder (lists searchable fields)
- [ ] Consistent empty state messages
- [ ] Checkbox selection enabled (for future bulk actions)
- [ ] Zero linter errors

---

## 13. Filter System

**Standard filter implementation** using the Nevios Filter System:

### Filter Configuration Files

**Pattern**: `{Module}FilterConfig.js` (e.g., `OrdersFilterConfig.js`)

```javascript
// src/components/nevios/NeviosFilters/OrdersFilterConfig.js
"use client";
import { FilterSelect } from './FilterSelect';
import { FilterMultipleSelect } from './FilterMultipleSelect';
import { FilterProductSelect } from './FilterProductSelect';
import { FilterContains } from './FilterContains';
import { FilterDateRange } from './FilterDateRange';

// Define filter options
const STATUS_OPTIONS = [
  { value: 'ACTIVE', label: 'Active' },
  { value: 'INACTIVE', label: 'Inactive' }
];

// ‚úÖ Export filter configuration array
export const MODULE_FILTER_CONFIG = [
  {
    id: 'created_at',  // Must match API filter field prefix
    label: 'Created Date',
    component: FilterDateRange,
    props: {
      fromLabel: 'From Date',
      toLabel: 'To Date',
      fieldPrefix: 'created_at'  // API will receive created_at_from, created_at_to
    }
  },
  {
    id: 'status',
    label: 'Status',
    component: FilterMultipleSelect,  // or FilterSelect for single-select
    options: STATUS_OPTIONS,
    props: {
      placeholder: 'All statuses',
      maxDisplayChips: 2  // For FilterMultipleSelect
    }
  },
  {
    id: 'products',
    label: 'Products',
    component: FilterProductSelect,
    props: {
      placeholder: 'All products',
      maxDisplayChips: 2
    }
  },
  {
    id: 'search_field',
    label: 'Search Field',
    component: FilterContains,
    props: {
      placeholder: 'Enter text...',
      debounceMs: 500
    }
  }
];

// ‚úÖ Export options for flexibility
export { STATUS_OPTIONS };
```

### Available Filter Components

**1. FilterDateRange** - Date range picker with calendar
```javascript
{
  id: 'created_at',
  label: 'Order Date',
  component: FilterDateRange,
  props: {
    fromLabel: 'From Date',
    toLabel: 'To Date',
    fieldPrefix: 'created_at'  // Sends: created_at_from, created_at_to
  }
}
```

**2. FilterMultipleSelect** - Multi-select dropdown with chips
```javascript
{
  id: 'payment_status',
  label: 'Payment Status',
  component: FilterMultipleSelect,
  options: PAYMENT_STATUS_OPTIONS,
  props: {
    placeholder: 'All payment statuses',
    maxDisplayChips: 2  // Show "2 selected" after 2 items
  }
}
```

**3. FilterSelect** - Single-select dropdown
```javascript
{
  id: 'fulfillment_status',
  label: 'Fulfillment Status',
  component: FilterSelect,
  options: FULFILLMENT_OPTIONS,
  props: {
    placeholder: 'All statuses'
  }
}
```

**4. FilterProductSelect** - Product search/select
```javascript
{
  id: 'products',
  label: 'Products',
  component: FilterProductSelect,
  props: {
    placeholder: 'All products',
    maxDisplayChips: 2
  }
}
```

**5. FilterContains** - Text input with debounce
```javascript
{
  id: 'product_variant',
  label: 'Product Variant',
  component: FilterContains,
  props: {
    placeholder: 'Enter variant name...',
    debounceMs: 500
  }
}
```

### Filter Integration in Tables

**Step 1**: Import filter config and URL persistence hook
```javascript
import { ORDERS_FILTER_CONFIG } from "../../nevios/NeviosFilters/OrdersFilterConfig";
import { useUrlFilters } from "../../../hooks/useUrlFilters";
```

**Step 2**: Initialize URL filters
```javascript
export function OrdersTable({ 
  tableHeight,
  initialFilters = {},
  initialSearch = ""
}) {
  // ‚úÖ Use URL filters for persistence
  const { 
    filters: urlFilters, 
    updateFilters: updateUrlFilters, 
    isInitialized 
  } = useUrlFilters(initialFilters);
  
  // ... rest of component
}
```

**Step 3**: Connect to useModuleQuery
```javascript
const {
  data,
  loading,
  error,
  totalCount,
  pagination,
  sortModel,
  searchTerm,
  // ... other returns
} = useModuleQuery('order', {
  expand: ["customer", "items"],
  // ‚úÖ Pass URL filters as external state
  externalFilters: isInitialized ? urlFilters : initialFilters,
  onFiltersChange: updateUrlFilters,
  autoFetch: isInitialized,  // Wait for URL to parse
  initialSearch,
  enableSearch: true,
  transformData: transformOrderData
});
```

**Step 4**: Add to NeviosEnhancedTable
```javascript
<NeviosEnhancedTable
  columns={columnDefinitions}
  data={data}
  loading={loading}
  // ... other props
  enableFilters={true}
  filterConfigs={ORDERS_FILTER_CONFIG}
  activeFilters={urlFilters}
  onFiltersChange={updateUrlFilters}
  // ... rest of props
/>
```

### Filter API Structure

**Filters are sent flat in the `filters` object**:

```javascript
// ‚úÖ CORRECT API Request Body
{
  "page": 1,
  "limit": 50,
  "orderBy": "created_at",
  "ascending": false,
  "expand": ["customer", "items"],
  "filters": {
    "created_at_from": "2026-01-10",  // ‚úÖ Flat structure
    "created_at_to": "2026-01-16",
    "payment_status": ["PAID", "UNPAID"],
    "products": ["uuid-1", "uuid-2"]
  }
}

// ‚ùå WRONG - Nested date ranges
{
  "filters": {
    "created_at": {  // ‚ùå Don't nest
      "created_at_from": "2026-01-10",
      "created_at_to": "2026-01-16"
    }
  }
}
```

### Filter Field Naming Rules

**Date Range Filters:**
- `id`: Use field prefix (e.g., `'created_at'`, `'updated_at'`)
- API receives: `{prefix}_from` and `{prefix}_to`
- Example: `created_at` ‚Üí `created_at_from`, `created_at_to`

**Multi-Select Filters:**
- `id`: Exact API field name (e.g., `'payment_status'`)
- API receives: Array of values `["PAID", "UNPAID"]`

**Single-Select Filters:**
- `id`: Exact API field name (e.g., `'status'`)
- API receives: Single value `"ACTIVE"`

**Text Filters (FilterContains):**
- `id`: Exact API field name (e.g., `'product_variant'`)
- API receives: String value `"XL Black"`

### URL Parameter Persistence

**Filters automatically persist in URL**:
```
/dashboard/orders?filters=%7B%22created_at_from%22%3A%222026-01-16%22%2C%22created_at_to%22%3A%222026-01-16%22%7D
```

**Benefits**:
- ‚úÖ Bookmarkable filter states
- ‚úÖ Survives page refresh
- ‚úÖ Shareable URLs
- ‚úÖ Browser back/forward navigation

**How it works**:
1. `useUrlFilters` hook syncs filters with URL
2. On page load, filters are parsed from URL
3. On filter change, URL is updated via `router.replace`
4. Filter bar auto-opens if URL contains filters

### Filter Best Practices

**1. Always create a config file for each module with filters**
```javascript
// ‚úÖ Good
OrdersFilterConfig.js
CustomersFilterConfig.js
ProductsFilterConfig.js

// ‚ùå Bad - Inline filter definitions
// Don't define filters directly in table component
```

**2. Match filter IDs to API field names**
```javascript
// ‚úÖ Good - ID matches API
{ id: 'payment_status', ... }  // API expects 'payment_status'
{ id: 'created_at', ... }       // API expects 'created_at_from', 'created_at_to'

// ‚ùå Bad - ID doesn't match API
{ id: 'status', ... }  // But API expects 'payment_status'
```

**3. Use appropriate filter components**
```javascript
// ‚úÖ Good - Right component for data type
Date ranges ‚Üí FilterDateRange
Multiple values ‚Üí FilterMultipleSelect
Single value ‚Üí FilterSelect
Text search ‚Üí FilterContains
Products ‚Üí FilterProductSelect

// ‚ùå Bad - Wrong component
Date ranges ‚Üí FilterContains
Multiple statuses ‚Üí FilterSelect (limits to one)
```

**4. Provide clear labels and placeholders**
```javascript
// ‚úÖ Good
{
  id: 'payment_status',
  label: 'Payment Status',  // Clear label
  props: {
    placeholder: 'All payment statuses'  // Descriptive
  }
}

// ‚ùå Bad
{
  id: 'payment_status',
  label: 'Status',  // Too vague
  props: {
    placeholder: 'Select...'  // Not helpful
  }
}
```

**5. Order filters logically**
```javascript
// ‚úÖ Good order - Most important first
export const ORDERS_FILTER_CONFIG = [
  // Date range first (most common)
  { id: 'created_at', label: 'Order Date', ... },
  // Then statuses
  { id: 'payment_status', ... },
  { id: 'fulfillment_status', ... },
  // Then specific filters
  { id: 'products', ... },
  { id: 'customer', ... }
];
```

### Complete Filter Example

```javascript
"use client";
import { Box } from "@mui/material";
import React, { useCallback } from "react";
import { useModuleQuery } from "../../../hooks/useModuleQuery";
import { useUrlFilters } from "../../../hooks/useUrlFilters";
import { NeviosEnhancedTable } from "../../nevios/NeviosEnhancedTable";
import { ORDERS_FILTER_CONFIG } from "../../nevios/NeviosFilters/OrdersFilterConfig";
import { clickableColumnFactory, dateColumnFactory } from "../../../components/ColumnDefinitions";

export function OrdersTable({ 
  tableHeight,
  initialFilters = {},
  initialSearch = ""
}) {
  // ‚úÖ URL persistence
  const { filters: urlFilters, updateFilters: updateUrlFilters, isInitialized } = useUrlFilters(initialFilters);

  const transformOrderData = useCallback((orders) => {
    if (!Array.isArray(orders)) return [];
    return orders.map(order => ({
      id: order.id,
      order_name: order.name,
      created_at: order.created_at,
      _original: order
    }));
  }, []);

  // ‚úÖ Connect filters to query
  const {
    data,
    loading,
    error,
    totalCount,
    pagination,
    sortModel,
    searchTerm,
    handlePaginationChange,
    handleSortChange,
    updateSearch
  } = useModuleQuery('order', {
    expand: ["customer", "items"],
    externalFilters: isInitialized ? urlFilters : initialFilters,
    onFiltersChange: updateUrlFilters,
    autoFetch: isInitialized,
    initialSearch,
    enableSearch: true,
    transformData: transformOrderData
  });

  const columnDefinitions = [
    clickableColumnFactory({
      field: "order_name",
      headerName: "Order",
      minWidth: 150,
      link: (params) => `/dashboard/orders/${params.id}`
    }),
    dateColumnFactory({
      field: "created_at",
      headerName: "Created",
      minWidth: 180
    })
  ];

  return (
    <Box sx={{ flex: 1, display: "flex", height: "100%", width: "100%", flexDirection: "column" }}>
      <NeviosEnhancedTable
        columns={columnDefinitions}
        data={data}
        loading={loading}
        error={error}
        totalCount={totalCount}
        pagination={pagination}
        onPaginationChange={handlePaginationChange}
        sortModel={sortModel}
        onSortChange={handleSortChange}
        tableHeight={tableHeight}
        enableSearch={true}
        searchTerm={searchTerm}
        onSearchChange={updateSearch}
        searchPlaceholder="Search orders..."
        // ‚úÖ Enable filters
        enableFilters={true}
        filterConfigs={ORDERS_FILTER_CONFIG}
        activeFilters={urlFilters}
        onFiltersChange={updateUrlFilters}
        checkboxSelection={true}
        getRowId={(row) => row.id}
        emptyStateProps={{
          title: 'No orders found',
          description: 'There are no orders to display'
        }}
      />
    </Box>
  );
}
```

---

## Quick Checklist (Updated)

When creating or reviewing a table component:

- [ ] Module name is singular (e.g., `'customer'` not `'customers'`)
- [ ] No `method: 'GET'` specified (uses POST default)
- [ ] Transform function follows naming: `transform{Module}Data`
- [ ] Transform function validates array input
- [ ] Standard props: `tableHeight`, `initialFilters`, `initialSearch`
- [ ] Data includes: `id`, `{module}_name`, `created_at`, `_original`
- [ ] First column uses `clickableColumnFactory` with detail link
- [ ] Date columns use `formatReadableDatetime()`
- [ ] Expands all displayed relationships
- [ ] Descriptive search placeholder (lists searchable fields)
- [ ] Consistent empty state messages
- [ ] Checkbox selection enabled (for future bulk actions)
- [ ] **Filter config file created** (if filters needed)
- [ ] **`useUrlFilters` hook integrated** (if filters enabled)
- [ ] **Filter IDs match API field names**
- [ ] **Appropriate filter components used**
- [ ] Zero linter errors

---

**Last Updated**: January 2026  
**Version**: 1.1
